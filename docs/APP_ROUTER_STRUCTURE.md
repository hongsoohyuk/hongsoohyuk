# Next.js App Router ë””ë ‰í† ë¦¬ êµ¬ì¡° ê°€ì´ë“œ

> ì°¸ê³ : [Next.js ê³µì‹ ë¬¸ì„œ](https://context7.com/vercel/next.js/llms.txt)

## ëª©ì°¨

- [ê°œìš”](#ê°œìš”)
- [ê¸°ë³¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°](#ê¸°ë³¸-ë””ë ‰í† ë¦¬-êµ¬ì¡°)
- [íŠ¹ìˆ˜ íŒŒì¼(Special Files)](#íŠ¹ìˆ˜-íŒŒì¼special-files)
- [ë¼ìš°íŒ… êµ¬ì¡°](#ë¼ìš°íŒ…-êµ¬ì¡°)
- [ê¶Œì¥ í”„ë¡œì íŠ¸ êµ¬ì¡°](#ê¶Œì¥-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì‹¤ì „ ì˜ˆì‹œ](#ì‹¤ì „-ì˜ˆì‹œ)
- [ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤](#ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤)

---

## ê°œìš”

Next.js App RouterëŠ” **íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ ë¼ìš°íŒ…**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. `app` ë””ë ‰í† ë¦¬ ë‚´ì˜ í´ë” êµ¬ì¡°ê°€ ê³§ URL ê²½ë¡œê°€ ë˜ë©°, íŠ¹ìˆ˜ íŒŒì¼ë“¤ì´ ê° ë¼ìš°íŠ¸ì˜ UIì™€ ë™ì‘ì„ ì •ì˜í•©ë‹ˆë‹¤.

### í•µì‹¬ ì›ì¹™

- ğŸ“ **í´ë”** = ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ (URL ê²½ë¡œ)
- ğŸ“„ **íŠ¹ìˆ˜ íŒŒì¼** = UI ì»´í¬ë„ŒíŠ¸ ë° ë™ì‘ ì •ì˜
- ğŸ¯ **Convention over Configuration** = íŒŒì¼ ì´ë¦„ìœ¼ë¡œ ê¸°ëŠ¥ ê²°ì •

---

## ê¸°ë³¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
app/
â”œâ”€â”€ layout.tsx          # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ (í•„ìˆ˜)
â”œâ”€â”€ page.tsx            # í™ˆí˜ì´ì§€ (/)
â”œâ”€â”€ loading.tsx         # ë¡œë”© UI
â”œâ”€â”€ error.tsx           # ì—ëŸ¬ UI
â”œâ”€â”€ not-found.tsx       # 404 í˜ì´ì§€
â”œâ”€â”€ globals.css         # ì „ì—­ ìŠ¤íƒ€ì¼
â”‚
â”œâ”€â”€ about/              # /about ê²½ë¡œ
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ layout.tsx      # about í•˜ìœ„ ë ˆì´ì•„ì›ƒ (ì„ íƒ)
â”‚
â”œâ”€â”€ blog/               # /blog ê²½ë¡œ
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”œâ”€â”€ [slug]/         # ë™ì  ë¼ìš°íŠ¸: /blog/:slug
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ loading.tsx
â”‚   â””â”€â”€ [...slug]/      # Catch-all: /blog/*
â”‚       â””â”€â”€ page.tsx
â”‚
â””â”€â”€ api/                # API ë¼ìš°íŠ¸
    â”œâ”€â”€ users/
    â”‚   â””â”€â”€ route.ts    # GET/POST /api/users
    â””â”€â”€ posts/
        â””â”€â”€ [id]/
            â””â”€â”€ route.ts # GET/PUT/DELETE /api/posts/:id
```

---

## íŠ¹ìˆ˜ íŒŒì¼(Special Files)

### 1. `layout.tsx` - ë ˆì´ì•„ì›ƒ

**ëª©ì **: ì—¬ëŸ¬ í˜ì´ì§€ì—ì„œ ê³µìœ ë˜ëŠ” UIë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ë ˆì´ì•„ì›ƒì€ ìƒíƒœë¥¼ ìœ ì§€í•˜ë©° ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

**íŠ¹ì§•**:

- ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ(`app/layout.tsx`)ì€ **í•„ìˆ˜**
- ì¤‘ì²© ê°€ëŠ¥ (ë¶€ëª¨ ë ˆì´ì•„ì›ƒì´ ìì‹ ë ˆì´ì•„ì›ƒì„ ê°ìŒˆ)
- `<html>`, `<body>` íƒœê·¸ëŠ” ë£¨íŠ¸ ë ˆì´ì•„ì›ƒì—ë§Œ ì‘ì„±

```typescript
// app/layout.tsx (ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ - í•„ìˆ˜)
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';

const inter = Inter({ subsets: ['latin'] });

export const metadata: Metadata = {
  title: 'My App',
  description: 'Generated by create next app',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="ko">
      <body className={inter.className}>
        <header>ê³µí†µ í—¤ë”</header>
        {children}
        <footer>ê³µí†µ í‘¸í„°</footer>
      </body>
    </html>
  );
}
```

```typescript
// app/dashboard/layout.tsx (ì¤‘ì²© ë ˆì´ì•„ì›ƒ)
export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div className="dashboard-container">
      <aside>ì‚¬ì´ë“œë°”</aside>
      <main>{children}</main>
    </div>
  );
}
```

---

### 2. `page.tsx` - í˜ì´ì§€

**ëª©ì **: ë¼ìš°íŠ¸ì˜ ì‹¤ì œ UIë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤. í´ë”ì— `page.tsx`ê°€ ìˆì–´ì•¼ í•´ë‹¹ ê²½ë¡œì— ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```typescript
// app/page.tsx â†’ /
export default function HomePage() {
  return <h1>í™ˆí˜ì´ì§€</h1>;
}

// app/about/page.tsx â†’ /about
export default function AboutPage() {
  return <h1>ì†Œê°œ í˜ì´ì§€</h1>;
}

// app/blog/[slug]/page.tsx â†’ /blog/:slug
type Props = {
  params: Promise<{ slug: string }>;
};

export default async function BlogPost({ params }: Props) {
  const { slug } = await params;
  return <h1>ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸: {slug}</h1>;
}
```

---

### 3. `loading.tsx` - ë¡œë”© UI

**ëª©ì **: Suspense ê²½ê³„ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ì—¬ ë¡œë”© ìƒíƒœë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

```typescript
// app/loading.tsx
export default function Loading() {
  return (
    <div className="loading-spinner">
      <p>ë¡œë”© ì¤‘...</p>
    </div>
  );
}

// app/blog/loading.tsx (íŠ¹ì • ê²½ë¡œì—ë§Œ ì ìš©)
export default function BlogLoading() {
  return <div>ë¸”ë¡œê·¸ ë¡œë”© ì¤‘...</div>;
}
```

---

### 4. `error.tsx` - ì—ëŸ¬ UI

**ëª©ì **: Error Boundaryë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ì—¬ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.

**ì£¼ì˜**: ë°˜ë“œì‹œ `'use client'` ë””ë ‰í‹°ë¸Œ í•„ìš”

```typescript
// app/error.tsx
'use client';

import { useEffect } from 'react';

export default function Error({
  error,
  reset,
}: {
  error: Error & { digest?: string };
  reset: () => void;
}) {
  useEffect(() => {
    console.error(error);
  }, [error]);

  return (
    <div>
      <h2>ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!</h2>
      <button onClick={() => reset()}>ë‹¤ì‹œ ì‹œë„</button>
    </div>
  );
}
```

---

### 5. `not-found.tsx` - 404 í˜ì´ì§€

**ëª©ì **: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë¡œì— ëŒ€í•œ UIë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

```typescript
// app/not-found.tsx
import Link from 'next/link';

export default function NotFound() {
  return (
    <div>
      <h1>404 - í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h1>
      <Link href="/">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</Link>
    </div>
  );
}
```

```typescript
// íŠ¹ì • í˜ì´ì§€ì—ì„œ notFound() íŠ¸ë¦¬ê±°
import { notFound } from 'next/navigation';

export default async function Post({ params }: Props) {
  const { slug } = await params;
  const post = await getPost(slug);

  if (!post) {
    notFound(); // not-found.tsxë¥¼ ë Œë”ë§
  }

  return <article>{post.content}</article>;
}
```

---

### 6. `route.ts` - API Route Handler

**ëª©ì **: REST API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ì§€ì› ë©”ì„œë“œ**: GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS

```typescript
// app/api/users/route.ts â†’ /api/users
import {NextResponse} from 'next/server';

export async function GET() {
  const users = await fetchUsers();
  return NextResponse.json(users);
}

export async function POST(request: Request) {
  const body = await request.json();
  const newUser = await createUser(body);
  return NextResponse.json(newUser, {status: 201});
}
```

```typescript
// app/api/posts/[id]/route.ts â†’ /api/posts/:id
import {NextRequest, NextResponse} from 'next/server';

type Params = {
  params: Promise<{id: string}>;
};

export async function GET(request: NextRequest, {params}: Params) {
  const {id} = await params;
  const post = await getPost(id);
  return NextResponse.json(post);
}

export async function DELETE(request: NextRequest, {params}: Params) {
  const {id} = await params;
  await deletePost(id);
  return NextResponse.json({success: true});
}
```

---

### 7. `template.tsx` - í…œí”Œë¦¿

**ëª©ì **: `layout.tsx`ì™€ ìœ ì‚¬í•˜ì§€ë§Œ, ê²½ë¡œ ë³€ê²½ ì‹œë§ˆë‹¤ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë©ë‹ˆë‹¤.

**ì°¨ì´ì **:

- `layout`: ìƒíƒœ ìœ ì§€, ë¦¬ë Œë”ë§ ì•ˆ ë¨
- `template`: ë§¤ë²ˆ ìƒˆë¡œ ë§ˆìš´íŠ¸, ìƒíƒœ ì´ˆê¸°í™”

```typescript
// app/template.tsx
export default function Template({ children }: { children: React.ReactNode }) {
  return <div className="page-transition">{children}</div>;
}
```

---

## ë¼ìš°íŒ… êµ¬ì¡°

### 1. ì •ì  ë¼ìš°íŠ¸

```
app/
â”œâ”€â”€ about/page.tsx        # /about
â”œâ”€â”€ contact/page.tsx      # /contact
â””â”€â”€ blog/
    â””â”€â”€ page.tsx          # /blog
```

---

### 2. ë™ì  ë¼ìš°íŠ¸ (Dynamic Routes)

**`[í´ë”ëª…]`**: ë‹¨ì¼ ë™ì  ì„¸ê·¸ë¨¼íŠ¸

```typescript
// app/blog/[slug]/page.tsx â†’ /blog/:slug
type Props = {
  params: Promise<{ slug: string }>;
};

export default async function BlogPost({ params }: Props) {
  const { slug } = await params;
  return <h1>{slug}</h1>;
}

// ì •ì  ìƒì„±ì„ ìœ„í•œ generateStaticParams
export async function generateStaticParams() {
  const posts = await getPosts();
  return posts.map((post) => ({
    slug: post.slug,
  }));
}
```

---

### 3. Catch-all Routes

**`[...í´ë”ëª…]`**: ëª¨ë“  í•˜ìœ„ ê²½ë¡œë¥¼ ìºì¹˜

```typescript
// app/docs/[...slug]/page.tsx
// â†’ /docs/a, /docs/a/b, /docs/a/b/c ëª¨ë‘ ë§¤ì¹­

type Props = {
  params: Promise<{ slug: string[] }>;
};

export default async function Docs({ params }: Props) {
  const { slug } = await params;
  // slug = ['a', 'b', 'c']
  return <h1>{slug.join(' / ')}</h1>;
}
```

**`[[...í´ë”ëª…]]`**: Optional Catch-all (ê¸°ë³¸ ê²½ë¡œë„ í¬í•¨)

```typescript
// app/shop/[[...category]]/page.tsx
// â†’ /shop, /shop/electronics, /shop/electronics/phones ëª¨ë‘ ë§¤ì¹­

type Props = {
  params: Promise<{ category?: string[] }>;
};

export default async function Shop({ params }: Props) {
  const { category } = await params;
  if (!category) {
    return <h1>ëª¨ë“  ìƒí’ˆ</h1>;
  }
  return <h1>ì¹´í…Œê³ ë¦¬: {category.join(' > ')}</h1>;
}
```

---

### 4. ë³‘ë ¬ ë¼ìš°íŠ¸ (Parallel Routes)

**`@í´ë”ëª…`**: ë™ì‹œì— ì—¬ëŸ¬ í˜ì´ì§€ë¥¼ ë Œë”ë§

```
app/
â””â”€â”€ dashboard/
    â”œâ”€â”€ layout.tsx
    â”œâ”€â”€ @analytics/
    â”‚   â””â”€â”€ page.tsx
    â”œâ”€â”€ @team/
    â”‚   â””â”€â”€ page.tsx
    â””â”€â”€ page.tsx
```

```typescript
// app/dashboard/layout.tsx
export default function DashboardLayout({
  children,
  analytics,
  team,
}: {
  children: React.ReactNode;
  analytics: React.ReactNode;
  team: React.ReactNode;
}) {
  return (
    <div>
      {children}
      <div className="grid">
        <div>{analytics}</div>
        <div>{team}</div>
      </div>
    </div>
  );
}
```

---

### 5. ì¸í„°ì…‰íŒ… ë¼ìš°íŠ¸ (Intercepting Routes)

**`(.)`**: í˜„ì¬ ë ˆë²¨, **`(..)`**: í•œ ë ˆë²¨ ìœ„, **`(..)(..)`**: ë‘ ë ˆë²¨ ìœ„

```
app/
â”œâ”€â”€ photos/
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx
â””â”€â”€ @modal/
    â””â”€â”€ (..)photos/
        â””â”€â”€ [id]/
            â””â”€â”€ page.tsx
```

---

### 6. ë¼ìš°íŠ¸ ê·¸ë£¹ (Route Groups)

**`(í´ë”ëª…)`**: URLì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ê·¸ë£¹

```
app/
â”œâ”€â”€ (marketing)/        # URLì— í¬í•¨ ì•ˆ ë¨
â”‚   â”œâ”€â”€ about/
â”‚   â”‚   â””â”€â”€ page.tsx    # /about
â”‚   â””â”€â”€ contact/
â”‚       â””â”€â”€ page.tsx    # /contact
â”‚
â””â”€â”€ (shop)/             # URLì— í¬í•¨ ì•ˆ ë¨
    â”œâ”€â”€ products/
    â”‚   â””â”€â”€ page.tsx    # /products
    â””â”€â”€ cart/
        â””â”€â”€ page.tsx    # /cart
```

**ìš©ë„**:

- ë ˆì´ì•„ì›ƒ ê·¸ë£¹í™” (ë‹¤ë¥¸ ë ˆì´ì•„ì›ƒ ì ìš©)
- ì½”ë“œ ì¡°ì§í™”
- ë‹¤ì¤‘ ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ ìƒì„±

---

## ê¶Œì¥ í”„ë¡œì íŠ¸ êµ¬ì¡°

### íŒ¨í„´ 1: Feature-based Structure (ê¸°ëŠ¥ë³„ êµ¬ì¡°)

```
app/
â”œâ”€â”€ (auth)/                    # ì¸ì¦ ê´€ë ¨ ë¼ìš°íŠ¸ ê·¸ë£¹
â”‚   â”œâ”€â”€ layout.tsx             # ì¸ì¦ ë ˆì´ì•„ì›ƒ (ë¡œê·¸ì¸ í˜ì´ì§€ìš©)
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ register/
â”‚       â””â”€â”€ page.tsx
â”‚
â”œâ”€â”€ (main)/                    # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¼ìš°íŠ¸ ê·¸ë£¹
â”‚   â”œâ”€â”€ layout.tsx             # ë©”ì¸ ë ˆì´ì•„ì›ƒ (í—¤ë”, í‘¸í„° í¬í•¨)
â”‚   â”œâ”€â”€ page.tsx               # í™ˆí˜ì´ì§€
â”‚   â”‚
â”‚   â”œâ”€â”€ blog/
â”‚   â”‚   â”œâ”€â”€ page.tsx           # ë¸”ë¡œê·¸ ëª©ë¡
â”‚   â”‚   â”œâ”€â”€ [slug]/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx       # ë¸”ë¡œê·¸ ìƒì„¸
â”‚   â”‚   â”‚   â””â”€â”€ loading.tsx
â”‚   â”‚   â””â”€â”€ _components/       # ë¸”ë¡œê·¸ ì „ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”‚       â”œâ”€â”€ PostCard.tsx
â”‚   â”‚       â””â”€â”€ PostList.tsx
â”‚   â”‚
â”‚   â””â”€â”€ portfolio/
â”‚       â”œâ”€â”€ page.tsx
â”‚       â””â”€â”€ _components/
â”‚           â””â”€â”€ ProjectCard.tsx
â”‚
â””â”€â”€ api/
    â”œâ”€â”€ auth/
    â”‚   â””â”€â”€ [...nextauth]/
    â”‚       â””â”€â”€ route.ts
    â”œâ”€â”€ blog/
    â”‚   â””â”€â”€ route.ts
    â””â”€â”€ portfolio/
        â””â”€â”€ route.ts

src/
â”œâ”€â”€ component/                 # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/                    # UI ì»´í¬ë„ŒíŠ¸ (shadcn/ui)
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â””â”€â”€ input.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/                # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ header.tsx
â”‚   â”‚   â”œâ”€â”€ footer.tsx
â”‚   â”‚   â””â”€â”€ sidebar.tsx
â”‚   â”‚
â”‚   â””â”€â”€ common/                # ê³µí†µ ê¸°ëŠ¥ ì»´í¬ë„ŒíŠ¸
â”‚       â””â”€â”€ providers/
â”‚           â”œâ”€â”€ query-provider.tsx
â”‚           â””â”€â”€ theme-provider.tsx
â”‚
â”œâ”€â”€ lib/                       # ìœ í‹¸ë¦¬í‹° & ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ api/                   # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ blog.ts
â”‚   â”‚   â””â”€â”€ portfolio.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                 # ì»¤ìŠ¤í…€ í›…
â”‚   â”‚   â”œâ”€â”€ use-blog.ts
â”‚   â”‚   â””â”€â”€ use-auth.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                 # TypeScript íƒ€ì…
â”‚   â”‚   â”œâ”€â”€ blog.ts
â”‚   â”‚   â””â”€â”€ user.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils.ts               # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ constants.ts           # ìƒìˆ˜
â”‚
â””â”€â”€ styles/                    # ì „ì—­ ìŠ¤íƒ€ì¼
    â””â”€â”€ globals.css
```

---

### íŒ¨í„´ 2: Simplified Structure (ê°„ì†Œí™”ëœ êµ¬ì¡°)

ì†Œê·œëª¨ í”„ë¡œì íŠ¸ì— ì í•©

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx
â””â”€â”€ api/
    â””â”€â”€ posts/
        â””â”€â”€ route.ts

src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â””â”€â”€ BlogPost.tsx
â”‚
â””â”€â”€ lib/
    â”œâ”€â”€ api.ts
    â””â”€â”€ utils.ts
```

---

## ì‹¤ì „ ì˜ˆì‹œ

### ì˜ˆì‹œ 1: ë¸”ë¡œê·¸ with Static Generation

```typescript
// app/blog/[slug]/page.tsx
import { notFound } from 'next/navigation';
import { getAllPosts, getPostBySlug } from '@/lib/api/blog';
import { Metadata } from 'next';

type Props = {
  params: Promise<{ slug: string }>;
};

// ë©”íƒ€ë°ì´í„° ìƒì„±
export async function generateMetadata({ params }: Props): Promise<Metadata> {
  const { slug } = await params;
  const post = getPostBySlug(slug);

  if (!post) {
    return { title: 'Post Not Found' };
  }

  return {
    title: `${post.title} | My Blog`,
    description: post.excerpt,
    openGraph: {
      title: post.title,
      description: post.excerpt,
      images: [post.coverImage],
    },
  };
}

// ì •ì  ê²½ë¡œ ìƒì„±
export async function generateStaticParams() {
  const posts = getAllPosts();
  return posts.map((post) => ({
    slug: post.slug,
  }));
}

// í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
export default async function BlogPost({ params }: Props) {
  const { slug } = await params;
  const post = getPostBySlug(slug);

  if (!post) {
    notFound();
  }

  return (
    <article>
      <h1>{post.title}</h1>
      <time>{post.date}</time>
      <div dangerouslySetInnerHTML={{ __html: post.content }} />
    </article>
  );
}
```

---

### ì˜ˆì‹œ 2: API Route with Error Handling

```typescript
// app/api/posts/route.ts
import {NextRequest, NextResponse} from 'next/server';
import {z} from 'zod';

const postSchema = z.object({
  title: z.string().min(1),
  content: z.string().min(1),
});

export async function GET() {
  try {
    const posts = await fetchPosts();
    return NextResponse.json(posts);
  } catch (error) {
    return NextResponse.json({error: 'Failed to fetch posts'}, {status: 500});
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const validated = postSchema.parse(body);

    const newPost = await createPost(validated);
    return NextResponse.json(newPost, {status: 201});
  } catch (error) {
    if (error instanceof z.ZodError) {
      return NextResponse.json({error: 'Invalid request data', details: error.errors}, {status: 400});
    }
    return NextResponse.json({error: 'Failed to create post'}, {status: 500});
  }
}
```

---

### ì˜ˆì‹œ 3: êµ­ì œí™” (i18n) êµ¬í˜„

```
app/
â””â”€â”€ [lang]/
    â”œâ”€â”€ layout.tsx
    â”œâ”€â”€ page.tsx
    â””â”€â”€ about/
        â””â”€â”€ page.tsx
```

```typescript
// i18n-config.ts
export const i18n = {
  defaultLocale: 'ko',
  locales: ['ko', 'en', 'ja'],
} as const;

export type Locale = (typeof i18n)['locales'][number];

// app/[lang]/layout.tsx
import { i18n, type Locale } from '@/i18n-config';

export async function generateStaticParams() {
  return i18n.locales.map((locale) => ({ lang: locale }));
}

export default async function RootLayout({
  children,
  params,
}: {
  children: React.ReactNode;
  params: Promise<{ lang: Locale }>;
}) {
  const { lang } = await params;

  return (
    <html lang={lang}>
      <body>{children}</body>
    </html>
  );
}

// app/[lang]/page.tsx
import { getDictionary } from '@/lib/dictionaries';

export default async function HomePage({
  params,
}: {
  params: Promise<{ lang: Locale }>;
}) {
  const { lang } = await params;
  const dict = await getDictionary(lang);

  return (
    <div>
      <h1>{dict.home.title}</h1>
      <p>{dict.home.description}</p>
    </div>
  );
}
```

---

## ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. íŒŒì¼ ë„¤ì´ë° ê·œì¹™

```
âœ… ì¢‹ì€ ì˜ˆ:
- page.tsx
- layout.tsx
- loading.tsx
- error.tsx
- not-found.tsx
- route.ts

âŒ ë‚˜ìœ ì˜ˆ:
- Page.tsx (ëŒ€ë¬¸ì ì‹œì‘)
- page.js (TypeScript ì‚¬ìš© ê¶Œì¥)
- index.tsx (App Routerì—ì„œëŠ” page.tsx ì‚¬ìš©)
```

---

### 2. ì»´í¬ë„ŒíŠ¸ ì¡°ì§í™”

**ê·œì¹™**: ë¼ìš°íŠ¸ë³„ ì»´í¬ë„ŒíŠ¸ëŠ” `_components` í´ë”ì— ë°°ì¹˜ (ì–¸ë”ìŠ¤ì½”ì–´ëŠ” ë¼ìš°íŠ¸ì—ì„œ ì œì™¸ë¨)

```
app/
â””â”€â”€ blog/
    â”œâ”€â”€ page.tsx
    â”œâ”€â”€ _components/          # ë¸”ë¡œê·¸ ì „ìš© ì»´í¬ë„ŒíŠ¸ (ë¼ìš°íŠ¸ ì•„ë‹˜)
    â”‚   â”œâ”€â”€ PostCard.tsx
    â”‚   â”œâ”€â”€ PostList.tsx
    â”‚   â””â”€â”€ PostFilter.tsx
    â””â”€â”€ [slug]/
        â””â”€â”€ page.tsx

src/component/                # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â””â”€â”€ ui/
    â”œâ”€â”€ button.tsx
    â””â”€â”€ card.tsx
```

---

### 3. Server Components vs Client Components

**ê¸°ë³¸ ì›ì¹™**: ê¸°ë³¸ì ìœ¼ë¡œ Server Component ì‚¬ìš©, í•„ìš”í•  ë•Œë§Œ Client Component

```typescript
// âœ… Server Component (ê¸°ë³¸)
// - ë°ì´í„° fetching
// - ë°±ì—”ë“œ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼
// - ë¯¼ê°í•œ ì •ë³´ ì²˜ë¦¬
export default async function BlogPost() {
  const posts = await fetchPosts(); // ì„œë²„ì—ì„œ ì‹¤í–‰
  return <PostList posts={posts} />;
}

// âœ… Client Component
// - ì¸í„°ë™ì…˜ (onClick, onChange)
// - State & Effects (useState, useEffect)
// - Browser API ì‚¬ìš©
'use client';

import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);
  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}
```

---

### 4. ë°ì´í„° Fetching íŒ¨í„´

**íŒ¨í„´ 1**: í˜ì´ì§€ì—ì„œ ì§ì ‘ Fetch (Server Component)

```typescript
// app/posts/page.tsx
export default async function PostsPage() {
  const posts = await fetch('https://api.example.com/posts').then((r) =>
    r.json()
  );

  return <PostList posts={posts} />;
}
```

**íŒ¨í„´ 2**: API Layer ë¶„ë¦¬ (ê¶Œì¥)

```typescript
// lib/api/posts.ts
export async function getPosts() {
  const response = await fetch('https://api.example.com/posts', {
    cache: 'force-cache', // ìºì‹± ì „ëµ
  });
  return response.json();
}

// app/posts/page.tsx
import { getPosts } from '@/lib/api/posts';

export default async function PostsPage() {
  const posts = await getPosts();
  return <PostList posts={posts} />;
}
```

**íŒ¨í„´ 3**: React Query ì‚¬ìš© (Client Component)

```typescript
// lib/hooks/use-posts.ts
'use client';

import { useQuery } from '@tanstack/react-query';
import { getPosts } from '@/lib/api/posts';

export function usePosts() {
  return useQuery({
    queryKey: ['posts'],
    queryFn: getPosts,
  });
}

// app/posts/page.tsx
'use client';

import { usePosts } from '@/lib/hooks/use-posts';

export default function PostsPage() {
  const { data: posts, isLoading } = usePosts();

  if (isLoading) return <div>Loading...</div>;

  return <PostList posts={posts} />;
}
```

---

### 5. ë ˆì´ì•„ì›ƒ ì¬ì‚¬ìš© ì „ëµ

```typescript
// app/(main)/layout.tsx - ë©”ì¸ ë ˆì´ì•„ì›ƒ
export default function MainLayout({ children }: { children: React.ReactNode }) {
  return (
    <>
      <Header />
      <main>{children}</main>
      <Footer />
    </>
  );
}

// app/(auth)/layout.tsx - ì¸ì¦ ë ˆì´ì•„ì›ƒ
export default function AuthLayout({ children }: { children: React.ReactNode }) {
  return (
    <div className="auth-container">
      <Logo />
      {children}
    </div>
  );
}
```

---

### 6. ìºì‹± ì „ëµ

```typescript
// 1. Force Cache (ê¸°ë³¸ê°’) - ë¹Œë“œ íƒ€ì„ì— ìºì‹œ
export default async function Page() {
  const data = await fetch('https://api.example.com/data', {
    cache: 'force-cache', // ì •ì  ë°ì´í„°
  });
}

// 2. No Store - ë§¤ ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œ fetch
export default async function Page() {
  const data = await fetch('https://api.example.com/data', {
    cache: 'no-store', // ë™ì  ë°ì´í„°
  });
}

// 3. Revalidate - íŠ¹ì • ì‹œê°„ë§ˆë‹¤ ì¬ê²€ì¦
export default async function Page() {
  const data = await fetch('https://api.example.com/data', {
    next: {revalidate: 3600}, // 1ì‹œê°„ë§ˆë‹¤ ì¬ê²€ì¦ (ISR)
  });
}

// 4. Tag-based Revalidation - ì˜¨ë””ë§¨ë“œ ì¬ê²€ì¦
export default async function Page() {
  const data = await fetch('https://api.example.com/data', {
    next: {tags: ['posts']},
  });
}

// API Routeì—ì„œ ì¬ê²€ì¦ íŠ¸ë¦¬ê±°
import {revalidateTag} from 'next/cache';

export async function POST() {
  revalidateTag('posts');
  return Response.json({revalidated: true});
}
```

---

### 7. í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©

```typescript
// .env.local
DATABASE_URL=postgresql://...
NEXT_PUBLIC_API_URL=https://api.example.com

// Server Component - ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ ì ‘ê·¼ ê°€ëŠ¥
export default async function Page() {
  const dbUrl = process.env.DATABASE_URL; // âœ… OK
}

// Client Component - NEXT_PUBLIC_ ì ‘ë‘ì‚¬ë§Œ ê°€ëŠ¥
'use client';

export default function Page() {
  const apiUrl = process.env.NEXT_PUBLIC_API_URL; // âœ… OK
  const dbUrl = process.env.DATABASE_URL; // âŒ undefined
}
```

---

## SOLID ì›ì¹™ ì ìš©

### 1. Single Responsibility Principle (SRP)

```typescript
// âŒ ë‚˜ìœ ì˜ˆ: ì—¬ëŸ¬ ì±…ì„ì„ ê°€ì§„ í˜ì´ì§€
export default async function PostsPage() {
  // ë°ì´í„° fetching
  const posts = await fetch('...').then((r) => r.json());

  // ë°ì´í„° ë³€í™˜
  const formattedPosts = posts.map(/* ... */);

  // UI ë Œë”ë§
  return <div>{/* ë³µì¡í•œ UI */}</div>;
}

// âœ… ì¢‹ì€ ì˜ˆ: ì±…ì„ ë¶„ë¦¬
// lib/api/posts.ts - ë°ì´í„° fetching
export async function getPosts() {
  return fetch('...').then((r) => r.json());
}

// lib/utils/post.ts - ë°ì´í„° ë³€í™˜
export function formatPosts(posts: Post[]) {
  return posts.map(/* ... */);
}

// app/posts/_components/PostList.tsx - UI ë Œë”ë§
export function PostList({ posts }: { posts: Post[] }) {
  return <div>{/* UI */}</div>;
}

// app/posts/page.tsx - ì¡°í•©
import { getPosts } from '@/lib/api/posts';
import { formatPosts } from '@/lib/utils/post';
import { PostList } from './_components/PostList';

export default async function PostsPage() {
  const posts = await getPosts();
  const formatted = formatPosts(posts);
  return <PostList posts={formatted} />;
}
```

---

### 2. Dependency Inversion Principle (DIP)

```typescript
// âœ… ì¶”ìƒí™”ì— ì˜ì¡´
// lib/api/interface.ts
export interface PostRepository {
  getPosts(): Promise<Post[]>;
  getPost(id: string): Promise<Post>;
}

// lib/api/post-repository.ts
export class ApiPostRepository implements PostRepository {
  async getPosts() {
    return fetch('/api/posts').then((r) => r.json());
  }

  async getPost(id: string) {
    return fetch(`/api/posts/${id}`).then((r) => r.json());
  }
}

// lib/hooks/use-posts.ts
export function usePosts(repository: PostRepository) {
  return useQuery({
    queryKey: ['posts'],
    queryFn: () => repository.getPosts(),
  });
}
```

---

## ì°¸ê³  ìë£Œ

- [Next.js ê³µì‹ ë¬¸ì„œ - App Router](https://nextjs.org/docs/app)
- [Next.js ê³µì‹ ë¬¸ì„œ - Routing](https://nextjs.org/docs/app/building-your-application/routing)
- [Next.js Context7 Documentation](https://context7.com/vercel/next.js/llms.txt)

---

**ì‘ì„±ì¼**: 2025-10-25
**ë²„ì „**: Next.js 14/15/16
