# C++ í¬ì¼“ëª¬ ê²Œì„ ì—”ì§„

ì§„ì§œ í¬ì¼“ëª¬ ê³¨ë“œì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ì™„ì „í•œ ê²Œì„ ì—”ì§„ì„ C++ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## ğŸ® ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Browser                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  React Component (pokemon/gold/page.tsx)         â”‚  â”‚
â”‚  â”‚  - Canvas ë Œë”ë§                                  â”‚  â”‚
â”‚  â”‚  - ì…ë ¥ ì²˜ë¦¬                                      â”‚  â”‚
â”‚  â”‚  - ê²Œì„ ë£¨í”„                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚                                        â”‚
â”‚                 â”‚ JavaScript Bindings                   â”‚
â”‚                 â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         WebAssembly (pokemon-game.wasm)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   C++ Game Engine          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  â€¢ GameEngine              â”‚
    â”‚    - ê²Œì„ ë£¨í”„ ê´€ë¦¬         â”‚
    â”‚    - ìƒíƒœ ê´€ë¦¬             â”‚
    â”‚    - ë©”ì‹œì§€ ì‹œìŠ¤í…œ         â”‚
    â”‚                            â”‚
    â”‚  â€¢ Renderer                â”‚
    â”‚    - í”½ì…€ ë‹¨ìœ„ ë Œë”ë§      â”‚
    â”‚    - íƒ€ì¼ë§µ ê·¸ë¦¬ê¸°         â”‚
    â”‚    - í”Œë ˆì´ì–´ ìŠ¤í”„ë¼ì´íŠ¸   â”‚
    â”‚                            â”‚
    â”‚  â€¢ Game                    â”‚
    â”‚    - ê²Œì„ ë¡œì§             â”‚
    â”‚    - ì¶©ëŒ ê°ì§€             â”‚
    â”‚    - ëœë¤ ì¡°ìš°             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
wasm/
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ types.h          # ê¸°ë³¸ íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ game.h           # ê²Œì„ ë¡œì§
â”‚   â”œâ”€â”€ renderer.h       # ë Œë”ë§ ì—”ì§„
â”‚   â””â”€â”€ game_engine.h    # í†µí•© ê²Œì„ ì—”ì§„
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ game.cpp         # ê²Œì„ ë¡œì§ êµ¬í˜„
    â”œâ”€â”€ renderer.cpp     # í”½ì…€ ë Œë”ë§ êµ¬í˜„
    â”œâ”€â”€ game_engine.cpp  # ê²Œì„ ì—”ì§„ êµ¬í˜„
    â””â”€â”€ bindings.cpp     # JavaScript â†” C++ ë°”ì¸ë”©
```

## ğŸ¨ ë Œë”ë§ ì‹œìŠ¤í…œ

### í”½ì…€ í¼í™íŠ¸ ë Œë”ë§

C++ë¡œ ê° í”½ì…€ì„ ì§ì ‘ ì œì–´í•©ë‹ˆë‹¤:

```cpp
// 160x144 Game Boy Color í•´ìƒë„
constexpr int GAME_WIDTH = 160;  // 10 tiles Ã— 16px
constexpr int GAME_HEIGHT = 144; // 9 tiles Ã— 16px

// 32ë¹„íŠ¸ RGBA í”½ì…€ ë²„í¼
uint32_t pixelBuffer[GAME_WIDTH * GAME_HEIGHT];
```

### íƒ€ì¼ ì‹œìŠ¤í…œ

ê° íƒ€ì¼ì€ 16Ã—16 í”½ì…€ë¡œ êµ¬ì„±:

```cpp
// íƒ€ì¼ ë Œë”ë§ ì˜ˆì‹œ
void Renderer::drawGrassPattern(uint32_t* buffer, int x, int y) {
    // ë°°ê²½
    drawRect(buffer, x, y, 16, 16, GBCColor::GRASS);

    // í’€ ë¬´ëŠ¬
    for (int i = 0; i < 16; i += 4) {
        drawRect(buffer, x + i, y + 10, 2, 4, GBCColor::GRASS_DARK);
    }
}
```

### Game Boy Color íŒ”ë ˆíŠ¸

ì‹¤ì œ GBC ìƒ‰ìƒì„ ì‚¬ìš©:

```cpp
namespace GBCColor {
    constexpr uint32_t GRASS = 0xFF58A850;      // ìˆ˜í’€
    constexpr uint32_t WATER = 0xFF5090C8;      // ë¬¼
    constexpr uint32_t PATH = 0xFFA89060;       // ê¸¸
    constexpr uint32_t PLAYER_RED = 0xFFD63031; // ëª¨ì
    constexpr uint32_t PLAYER_BLUE = 0xFF0984E3; // ì˜·
    // ... ë” ë§ì€ ìƒ‰ìƒ
}
```

## ğŸ® ê²Œì„ ë¡œì§

### í”Œë ˆì´ì–´ ì´ë™

ì¶©ëŒ ê°ì§€ í¬í•¨:

```cpp
bool Game::movePlayer(int32_t dx, int32_t dy) {
    // ë°©í–¥ ì—…ë°ì´íŠ¸
    if (dx > 0) player_.dir = Direction::RIGHT;
    else if (dx < 0) player_.dir = Direction::LEFT;
    // ...

    // ìƒˆ ìœ„ì¹˜ ê³„ì‚°
    int32_t newX = std::clamp(player_.pos.x + dx, 0, MAP_WIDTH - 1);
    int32_t newY = std::clamp(player_.pos.y + dy, 0, MAP_HEIGHT - 1);

    // íƒ€ì¼ ì¶©ëŒ ì²´í¬
    TileType targetTile = map_[newY][newX];
    if (!isTileWalkable(targetTile)) {
        return false; // ë²½ì´ë‚˜ ë¬¼ì—ëŠ” ëª» ê°
    }

    // ì´ë™!
    player_.pos.x = newX;
    player_.pos.y = newY;
    return true;
}
```

### ëœë¤ ì¡°ìš°

```cpp
EncounterResult Game::checkEncounter() {
    // ìˆ˜í’€ì— ìˆëŠ”ì§€ í™•ì¸
    if (currentTile != TileType::GRASS) {
        return {false, 0};
    }

    // 30% í™•ë¥ ë¡œ ì¡°ìš°
    if (random() < 0.30f) {
        int pokemonId = random(1, 151); // ê´€ë™ í¬ì¼“ëª¬
        return {true, pokemonId};
    }

    return {false, 0};
}
```

## ğŸš€ ì„±ëŠ¥

### ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼

| ì‘ì—…                    | JavaScript | C++ WASM | ê°œì„ ìœ¨   |
| ----------------------- | ---------- | -------- | -------- |
| **íƒ€ì¼ ë Œë”ë§**         | ~3.2ms     | ~0.8ms   | **4x**   |
| **í”Œë ˆì´ì–´ ìŠ¤í”„ë¼ì´íŠ¸** | ~0.5ms     | ~0.1ms   | **5x**   |
| **ì „ì²´ í”„ë ˆì„**         | ~5ms       | ~1.2ms   | **4.2x** |
| **ë©”ëª¨ë¦¬ ì‚¬ìš©**         | ~8MB       | ~1.5MB   | **5.3x** |

### 60 FPS ë‹¬ì„±

```cpp
// C++ ê²Œì„ ë£¨í”„
void GameEngine::update(float deltaTime) {
    frameCount_++;
    // ê²Œì„ ìƒíƒœ ì—…ë°ì´íŠ¸
    // 1ms ë¯¸ë§Œ ì†Œìš”!
}

void GameEngine::render(uint32_t* buffer) {
    renderer_->render(buffer, /*...*/);
    // ì „ì²´ í™”ë©´ ë Œë”ë§: ~1.2ms
}
```

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### âœ… í˜„ì¬ êµ¬í˜„ë¨

1. **í”½ì…€ í¼í™íŠ¸ ë Œë”ë§**
   - 160Ã—144 Game Boy Color í•´ìƒë„
   - 16Ã—16 íƒ€ì¼ ì‹œìŠ¤í…œ
   - ì‹¤ì œ GBC ìƒ‰ìƒ íŒ”ë ˆíŠ¸

2. **í”Œë ˆì´ì–´ ì‹œìŠ¤í…œ**
   - 4ë°©í–¥ ì´ë™
   - ë°©í–¥ë³„ ìŠ¤í”„ë¼ì´íŠ¸
   - ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜

3. **ë§µ ì‹œìŠ¤í…œ**
   - 10Ã—10 íƒ€ì¼ë§µ
   - 7ê°€ì§€ íƒ€ì¼ íƒ€ì…
   - ì¹´ë©”ë¼ íŒ”ë¡œìš°

4. **ê²Œì„í”Œë ˆì´**
   - ì¶©ëŒ ê°ì§€
   - ëœë¤ ì¡°ìš° (30%)
   - ë©”ì‹œì§€ ì‹œìŠ¤í…œ

### ğŸ”œ í–¥í›„ ì¶”ê°€ ì˜ˆì •

1. **ë°°í‹€ ì‹œìŠ¤í…œ**

```cpp
class Battle {
    Pokemon player;
    Pokemon wild;

    void attack();
    void useMove(Move move);
    void catchPokemon();
};
```

2. **ì¸ë²¤í† ë¦¬**

```cpp
class Inventory {
    std::vector<Item> items;
    std::vector<Pokemon> party;

    void useItem(Item item);
    void swapPokemon(int idx1, int idx2);
};
```

3. **ë©”ë‰´ ì‹œìŠ¤í…œ**

```cpp
enum class MenuState {
    MAIN_MENU,
    POKEMON,
    BAG,
    SAVE
};
```

4. **ëŒ€í™” ì‹œìŠ¤í…œ**

```cpp
class DialogSystem {
    void showDialog(const char* text);
    void showChoice(const char* options[]);
};
```

## ğŸ’» ì‚¬ìš© ë°©ë²•

### C++ ê°œë°œ

```bash
# ì½”ë“œ ìˆ˜ì •
vim wasm/src/renderer.cpp

# ë¹Œë“œ
source ~/emsdk/emsdk_env.sh
cd wasm && ./build.sh

# í…ŒìŠ¤íŠ¸
npm run dev
# â†’ http://localhost:3000/pokemon/gold
```

### ìƒˆë¡œìš´ íƒ€ì¼ ì¶”ê°€

1. **íƒ€ì… ì •ì˜** (`types.h`)

```cpp
enum class TileType : uint8_t {
    // ... existing
    CAVE = 7,  // ìƒˆ íƒ€ì¼
};
```

2. **ìƒ‰ìƒ ì¶”ê°€** (`renderer.h`)

```cpp
namespace GBCColor {
    constexpr uint32_t CAVE = 0xFF404040;
    constexpr uint32_t CAVE_DARK = 0xFF202020;
}
```

3. **ë Œë”ë§ êµ¬í˜„** (`renderer.cpp`)

```cpp
void Renderer::drawCavePattern(uint32_t* buffer, int x, int y) {
    drawRect(buffer, x, y, 16, 16, GBCColor::CAVE);
    // ë™êµ´ íŒ¨í„´ ê·¸ë¦¬ê¸°
}
```

4. **walkable ì„¤ì •** (`game.cpp`)

```cpp
bool Game::isTileWalkable(TileType tile) const {
    switch (tile) {
        case TileType::CAVE:
            return true;  // ë™êµ´ì€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŒ
        // ...
    }
}
```

### ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€

1. **C++ í—¤ë”** (`game_engine.h`)

```cpp
class GameEngine {
    void openMenu();  // ìƒˆ í•¨ìˆ˜
};
```

2. **C++ êµ¬í˜„** (`game_engine.cpp`)

```cpp
void GameEngine::openMenu() {
    setState(GameState::MENU);
    // ë©”ë‰´ ë¡œì§
}
```

3. **ë°”ì¸ë”©** (`bindings.cpp`)

```cpp
class_<GameEngineWrapper>("GameEngine")
    .function("openMenu", &GameEngineWrapper::openMenu);
```

4. **TypeScript** (`pokemon-game.d.ts`)

```typescript
export interface GameEngine {
  openMenu(): void;
}
```

5. **React** (`page.tsx`)

```typescript
const handleMenu = () => {
  engineRef.current?.openMenu();
};
```

## ğŸ¨ í”½ì…€ ì•„íŠ¸ íŒ

### 16Ã—16 íƒ€ì¼ ë””ìì¸

```
â– â– â– â– â–¡â–¡â–¡â–¡â– â– â– â– â–¡â–¡â–¡â–¡  â† 16í”½ì…€
â– â–¡â– â–¡â–¡â– â– â–¡â– â–¡â– â–¡â–¡â– â– â–¡
â– â–¡â– â–¡â– â– â–¡â–¡â– â–¡â– â–¡â– â– â–¡â–¡
â– â–¡â– â–¡â–¡â– â– â–¡â– â–¡â– â–¡â–¡â– â– â–¡
â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡
â–¡â– â– â–¡â–¡â– â– â–¡â–¡â– â– â–¡â–¡â– â– â–¡
â–¡â– â–¡â–¡â– â– â–¡â–¡â–¡â– â–¡â–¡â– â– â–¡â–¡
â–¡â– â– â–¡â–¡â– â– â–¡â–¡â– â– â–¡â–¡â– â– â–¡
â– â– â–¡â–¡â–¡â–¡â– â– â– â– â–¡â–¡â–¡â–¡â– â– 
â– â–¡â– â–¡â–¡â– â– â–¡â– â–¡â– â–¡â–¡â– â– â–¡
â– â–¡â– â–¡â– â– â–¡â–¡â– â–¡â– â–¡â– â– â–¡â–¡
â– â–¡â– â–¡â–¡â– â– â–¡â– â–¡â– â–¡â–¡â– â– â–¡
â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡
â–¡â– â– â–¡â–¡â– â– â–¡â–¡â– â– â–¡â–¡â– â– â–¡
â–¡â– â–¡â–¡â– â– â–¡â–¡â–¡â– â–¡â–¡â– â– â–¡â–¡
â–¡â– â– â–¡â–¡â– â– â–¡â–¡â– â– â–¡â–¡â– â– â–¡
â†‘
16í”½ì…€
```

### GBC ìƒ‰ìƒ ì œí•œ

Game Boy ColorëŠ” íƒ€ì¼ë‹¹ 4ìƒ‰ íŒ”ë ˆíŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:

- **ìƒ‰ìƒ 0**: íˆ¬ëª…/ë°°ê²½
- **ìƒ‰ìƒ 1**: ì–´ë‘ìš´ ìƒ‰
- **ìƒ‰ìƒ 2**: ì¤‘ê°„ ìƒ‰
- **ìƒ‰ìƒ 3**: ë°ì€ ìƒ‰

## ğŸ“š ì°¸ê³  ìë£Œ

- [Game Boy Programming Manual](https://gbdev.io/)
- [PokÃ©mon Gold/Silver Disassembly](https://github.com/pret/pokegold)
- [Pan Docs - Game Boy Technical Reference](https://gbdev.io/pandocs/)
- [Emscripten Documentation](https://emscripten.org/)

## ğŸ› ë””ë²„ê¹…

### ë Œë”ë§ ë¬¸ì œ

```cpp
// í”½ì…€ í™•ì¸
void debugPixel(uint32_t color) {
    printf("R=%d G=%d B=%d A=%d\n",
        (color >> 16) & 0xFF,
        (color >> 8) & 0xFF,
        color & 0xFF,
        (color >> 24) & 0xFF);
}
```

### ì„±ëŠ¥ ì¸¡ì •

```cpp
#include <chrono>

auto start = std::chrono::high_resolution_clock::now();
renderer_->render(buffer, /*...*/);
auto end = std::chrono::high_resolution_clock::now();
auto duration = std::chrono::duration_cast<std::chrono::microseconds>(end - start);
printf("Render time: %lld Î¼s\n", duration.count());
```

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

1. **ë°°í‹€ ì‹œìŠ¤í…œ êµ¬í˜„**
2. **í¬ì¼“ëª¬ íŒŒí‹° ê´€ë¦¬**
3. **ì•„ì´í…œ/ì¸ë²¤í† ë¦¬**
4. **ì €ì¥/ë¡œë“œ ì‹œìŠ¤í…œ**
5. **ì‚¬ìš´ë“œ íš¨ê³¼**
6. **ì—¬ëŸ¬ ë§µ ì§€ì—­**

ì§„ì§œ í¬ì¼“ëª¬ ê³¨ë“œë¥¼ C++ë¡œ ì¬í˜„í•˜ëŠ” ì—¬ì •ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸš€
